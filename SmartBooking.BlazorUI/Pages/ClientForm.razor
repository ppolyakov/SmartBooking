@page "/client"
@inject IClientService ClientService
@inject NavigationManager Nav
@inject ISnackbar Snackbar

<MudPaper Class="p-4 max-w-sm">
    <MudText Typo="Typo.h5" Class="mb-4">Enter your details</MudText>

    <MudTextField Label="Name" @bind-Value="_name" Required="true" />
    <MudTextField Label="Email" @bind-Value="_email" Required="true" />

    <MudButton OnClick="Submit" Color="Color.Primary" Class="mt-4" FullWidth="true">
        Continue
    </MudButton>
</MudPaper>

@code {
    private string _name = string.Empty;
    private string _email = string.Empty;

    private async Task Submit()
    {
        var clientId = await ClientService.CreateClientAsync(_name, _email);
        if (clientId != Guid.Empty)
        {
            Snackbar.Add("Welcome!", Severity.Success);
            Nav.NavigateTo($"/timeslots?clientId={clientId}");
        }
        else
        {
            Snackbar.Add("Something went wrong.", Severity.Error);
        }
    }
}